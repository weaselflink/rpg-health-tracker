<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RPG Health Tracker</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>
    <script type="application/ecmascript">
        function appendTransform(element, text) {
            element.setAttribute("transform",
                element.getAttribute("transform") + text
            );
        }

        function separateComponents() {
            let firstDials = document.querySelector(".dials:nth-child(2)");
            appendTransform(firstDials, " translate(-8, -8)");
            let secondDials = document.querySelector(".dials:nth-child(3)");
            appendTransform(secondDials, " translate(24, 16)");
            let cover = document.querySelector(".cover");
            appendTransform(cover, " rotate(90) translate(118, -112)");
            let back = document.querySelector(".back");
            appendTransform(back, " rotate(90) translate(17, -213)");
        }

        function onReady() {
            let leftText = document.querySelector(".left-dial text");
            let leftCount = 10;
            for (let i = 1; i < leftCount; i++) {
                let cloned = leftText.cloneNode(true);
                cloned.textContent = i + "";
                cloned.setAttribute("transform", "rotate(" + (-i * (360 / leftCount)) + ")")
                leftText.parentNode.appendChild(cloned);
            }
            let rightText = document.querySelector(".right-dial text");
            let rightCount = 10;
            for (let i = 1; i < rightCount; i++) {
                let cloned = rightText.cloneNode(true);
                cloned.textContent = i + "";
                cloned.setAttribute("transform", "rotate(" + (i * (360 / rightCount)) + ")")
                rightText.parentNode.appendChild(cloned);
            }
            let dials = document.querySelector(".dials");
            let cover = document.querySelector(".cover");
            let clonedDials = dials.cloneNode(true);
            appendTransform(clonedDials, " translate(0, 35)");
            dials.parentNode.insertBefore(clonedDials, cover);

            if (new URLSearchParams(window.location.search).has("print")) {
                separateComponents();
            }
        }

        document.addEventListener('DOMContentLoaded', onReady, false);
    </script>
</head>
<body>
<svg viewBox="0 0 210 260">
    <defs>
        <pattern id="wood" width="1" height="1"
                viewBox="0 0 861 574"
                preserveAspectRatio="xMidYMid slice">
            <image xlink:href="old-wood-structure-861x574.jpg"/>
        </pattern>
        <pattern id="wood2" width="1" height="1"
                patternTransform="translate(0,18) scale(1,-1)"
                viewBox="0 0 861 574"
                preserveAspectRatio="xMidYMid slice">
            <image xlink:href="old-wood-structure-861x574.jpg"/>
        </pattern>
    </defs>
    <style>
        circle {
            fill: none;
            stroke: black;
            stroke-width: 0.1;
        }

        .back path, .cover path {
            fill-opacity: 0.3;
            stroke: black;
            stroke-width: 0.1;
        }

        text {
            font-family: serif;
            font-size: 4mm;
            text-anchor: end;
        }
    </style>
    <g class="root">
        <g class="back" transform="translate(2, 103)">
            <path fill="url(#wood2)" fill-rule="evenodd" d="
                M 16,9
                l 116.5,0 l 7,7
                l 0,11 q -6,15 0,30 l 0,5 q -6,15 0,30 l 0,11
                l -7,7 l -116.5,0 l-7,-7
                l 0,-11 q 6,-15 0,-30 l 0,-5 q 6,-15 0,-30 l 0,-11
                z
            "/>
            <g  transform="translate(42, 42)">
                <circle cx="0" cy="0" r="2"/>
                <circle cx="0" cy="35" r="2"/>
            </g>
            <g  transform="translate(106.5, 42)">
                <circle cx="0" cy="0" r="2"/>
                <circle cx="0" cy="35" r="2"/>
            </g>
        </g>
        <g class="dials" transform="translate(2, 2)">
            <g class="left-dial" transform="translate(42, 42) rotate(36)">
                <circle cx="0" cy="0" r="32"/>
                <circle cx="0" cy="0" r="2"/>
                <text x="31" y="5"></text>
            </g>
            <g class="right-dial" transform="translate(106.5, 42) rotate(72)">
                <circle cx="0" cy="0" r="32"/>
                <circle cx="0" cy="0" r="2"/>
                <text x="-23" y="5">0</text>
            </g>
        </g>
        <g class="cover" transform="translate(2, 2)">
            <path fill="url(#wood)" fill-rule="evenodd" d="
                M 16,9
                l 116.5,0 l 7,7
                l 0,11 q -6,15 0,30 l 0,5 q -6,15 0,30 l 0,11
                l -7,7 l -116.5,0 l-7,-7
                l 0,-11 q 6,-15 0,-30 l 0,-5 q 6,-15 0,-30 l 0,-11
                z
                M 61,35 l 26,0 l 0,14 l -26,0 z
                M 61,70 l 26,0 l 0,14 l -26,0 z
            "/>
            <g  transform="translate(42, 42)">
                <circle cx="0" cy="0" r="2"/>
                <circle cx="0" cy="35" r="2"/>
            </g>
            <g  transform="translate(106.5, 42)">
                <circle cx="0" cy="0" r="2"/>
                <circle cx="0" cy="35" r="2"/>
            </g>
        </g>
    </g>
</svg>
</body>
</html>
